<!DOCTYPE HTML>
<html>

<head>
	<meta charset="utf-8" />
	<script src="http://code.jquery.com/jquery-2.0.3.js"></script>
	<script src="https://raw.github.com/linkedin/dustjs/master/dist/dust-full.js"></script>
</head>	
<body>
<script type='text/javascript'>

function view(model, templateUrl, templateKey) {

	$.get( templateUrl, function( template ) {
	  		console.log("load template html: " + template);

			// Compile 
			var compiled = dust.compile(template, templateKey);
			console.log("compiled: " + compiled);

			// Load
			dust.loadSource(compiled);

			// Rendering
			dust.render(templateKey, model , function(err, out){
				console.log("final(success): " + out);
				console.log("final(err): " + err);
				$("#table_content").html(out);
			});
		});
}

var templateUrl = "https://raw.github.com/chanwookpark/singlepageapp/master/ui/product-template.html";
var templateKey = "_prd";

// 페이지(View) 별로 정의하는 모델 정보 
var ProductModel = function() {
	this.modelUrl = 
		"https://raw.github.com/chanwookpark/singlepageapp/master/ui/product-model.json";
};

// Event Logic
ProductModel.prototype.init = function() {
	$.getJSON(this.modelUrl, function( model ) {
  		console.log("Model: " + model);

  		view(model, templateUrl, templateKey);
	});
}

var gridTable = new ProductModel();

$(document).ready(function(){
	gridTable.init();
});

	
</script>

<b> Grid </b>
<div>
<form>
<table border="1">
	<thead>
		<tr>
			<th>선</th>
			<th>번호</th>
			<th>상품ID</th>
			<th>상품이름</th>
			<th>상품가격</th>
		</tr>
	</thead>
	<tbody id="table_content">
	</tbody>
</table>
<input type="submit" value="저장" />
</form>
</div>

</body>
</html>